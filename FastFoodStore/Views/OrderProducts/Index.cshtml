@model FastFoodStore.ViewModels.OrderIndexData

@{
    ViewBag.Title = "OrderProduct";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<div>
    @using (Html.BeginForm())
    {
        <div class="pull-left">
            <p>
                Find by Buyer: @Html.TextBox("SearchString")
                <button class="btn btn-info" type="submit">
                    <i class="glyphicon glyphicon-search"></i>
                </button>
            </p>
        </div>
    }
</div>

<table class="table">
    <tr>
        <th>
            @Html.ActionLink("ID", "Index", new { sortOrder = ViewBag.NameSortParm })
        </th>
        <th>
            @Html.ActionLink("DateIn", "Index", new { sortOrder = ViewBag.NameSortParm })
        </th>
        <th>
            @Html.ActionLink("Status", "Index", new { sortOrder = ViewBag.NameSortParm })
        </th>
        <th>
            @Html.ActionLink("Buyer", "Index", new { sortOrder = ViewBag.NameSortParm })
            @*@Html.DisplayNameFor(model => model.Buyer)*@
        </th>
        <th>
            @Html.ActionLink("Total", "Index", new { sortOrder = ViewBag.NameSortParm })
            @*@Html.DisplayNameFor(model => model.Total)*@
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model.OrderProducts)
    {
        string selectedRow = "";
        if (item.ID == ViewBag.OrderProductID)
        {
            selectedRow = "success";
        }
        <tr class="@selectedRow">
            <td>
                @Html.DisplayFor(modelItem => item.ID)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DateIn)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Status)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Buyer)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Total)
            </td>
            <td>
                @Html.ActionLink("Select", "Index", new { id = item.ID }) |
                <a href="@Url.Action("Edit", "OrderProducts", new { id = item.ID })" class="btn btn-info">
                    <i class="glyphicon glyphicon-edit"></i>
                </a>

                @*<a href="@Url.Action("Details", "OrderProductDetails", new { id = item.ID })" class="btn btn-info">
                    <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
                </a>*@

                <a href="@Url.Action("Index", "OrderProductDetails")" class="btn btn-info">
                    <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
                </a>

                <a href="@Url.Action("Delete", "OrderProducts", new { id = item.ID })" class="btn btn-info">
                    <i class="glyphicon glyphicon-trash"></i>
                </a>
            </td>
        </tr>
    }

</table>
@if (Model.OrderProductDetails != null)
{
    <h3>OrderDetail Selected OrderProduct</h3>
        <table class="table">
            <tr>
                <th>ProductID</th>
                <th>Amount</th>
            </tr>
            @foreach (var item in Model.OrderProductDetails)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.ProductID)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Amount)
                    </td>
                </tr>
            }
        </table>
}
